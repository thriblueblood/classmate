{"ast":null,"code":"var _jsxFileName = \"/Users/thriblueblood/Desktop/SE/Year4_2/THESIS/pure/classmate/front-end/src/SubjectPage/AddFileModal.js\",\n    _s = $RefreshSig$();\n\nimport AddIcon from '@mui/icons-material/Add';\nimport React, { useState, useRef, useEffect } from 'react';\nimport { FormControl, Input, Form, Button, FormGroup, Box, TextField, Grid, Typography, Modal } from '@mui/material';\nimport axios from 'axios';\nimport Dropzone from 'react-dropzone';\nimport { ChatState } from '../Context/ChatProvider';\nimport { getSender } from '../Config/ChatLogics';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AddFileModal = () => {\n  _s();\n\n  const style = {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    width: 400,\n    bgcolor: 'background.paper',\n    border: '2px solid #000',\n    boxShadow: 24,\n    p: 4\n  };\n  const [open, setOpen] = useState(false);\n\n  const handleOpen = () => setOpen(true);\n\n  const handleClose = () => setOpen(false);\n\n  const {\n    user,\n    selectedChat\n  } = ChatState();\n  const [loading, setLoading] = useState(false);\n  const [file, setFile] = useState(null); // state for storing actual image\n\n  const [fileType, setFileType] = useState('');\n  const [filesList, setFilesList] = useState([]);\n  const [state, setState] = useState({\n    title: '',\n    description: ''\n  });\n  const [previewSrc, setPreviewSrc] = useState('');\n  const [isPreviewAvailable, setIsPreviewAvailable] = useState(false); // state to show preview only for images\n\n  const dropRef = useRef();\n\n  const handleInputChange = event => {\n    setState({ ...state,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const onDrop = files => {\n    const [uploadedFile] = files;\n    setFile(uploadedFile);\n    const fileReader = new FileReader();\n\n    fileReader.onload = () => {\n      setPreviewSrc(fileReader.result);\n    };\n\n    fileReader.readAsDataURL(uploadedFile);\n    setIsPreviewAvailable(uploadedFile.name.match(/.(jpeg|jpg|png)$/));\n    dropRef.current.style.border = '2px dashed #e9ebeb';\n  };\n\n  const updateBorder = dragState => {\n    if (dragState === 'over') {\n      dropRef.current.style.border = '2px solid #000';\n    } else if (dragState === 'leave') {\n      dropRef.current.style.border = '2px dashed #e9ebeb';\n    }\n  };\n\n  const handleOnSubmit = async event => {\n    event.preventDefault();\n\n    try {\n      const {\n        title,\n        description\n      } = state;\n\n      if (title.trim() !== '' && description.trim() !== '') {\n        if (file) {\n          const formData = new FormData();\n          formData.append('file', file);\n          formData.append('title', title);\n          formData.append('description', description);\n          formData.append('fileType', fileType);\n          await axios.post(\"/api/file/upload\", formData, {\n            headers: {\n              \"Content-Type\": 'multipart/form-data'\n            }\n          });\n          console.log(formData);\n        } else {\n          console.log('Please select a file to add.');\n        }\n      } else {\n        console.log('Please enter all the field values.');\n      }\n    } catch (error) {\n      console.log(\"ERROR\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      style: {\n        backgroundColor: \"green\",\n        margin: \"1% 0%\",\n        marginLeft: \"auto\"\n      },\n      variant: \"contained\",\n      startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 116\n      }, this),\n      onClick: handleOpen,\n      children: \"Add New Material\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: open,\n      onClose: handleClose,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: style\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AddFileModal, \"9qM1F9lU9YMzqSJfhrK4rrD61L4=\");\n\n_c = AddFileModal;\nexport default AddFileModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddFileModal\");","map":{"version":3,"sources":["/Users/thriblueblood/Desktop/SE/Year4_2/THESIS/pure/classmate/front-end/src/SubjectPage/AddFileModal.js"],"names":["AddIcon","React","useState","useRef","useEffect","FormControl","Input","Form","Button","FormGroup","Box","TextField","Grid","Typography","Modal","axios","Dropzone","ChatState","getSender","AddFileModal","style","position","top","left","transform","width","bgcolor","border","boxShadow","p","open","setOpen","handleOpen","handleClose","user","selectedChat","loading","setLoading","file","setFile","fileType","setFileType","filesList","setFilesList","state","setState","title","description","previewSrc","setPreviewSrc","isPreviewAvailable","setIsPreviewAvailable","dropRef","handleInputChange","event","target","name","value","onDrop","files","uploadedFile","fileReader","FileReader","onload","result","readAsDataURL","match","current","updateBorder","dragState","handleOnSubmit","preventDefault","trim","formData","FormData","append","post","headers","console","log","error","backgroundColor","margin","marginLeft"],"mappings":"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","sourcesContent":["\nimport AddIcon from '@mui/icons-material/Add';\nimport React, { useState , useRef, useEffect} from 'react'\nimport {FormControl, Input, Form, Button, FormGroup, Box, TextField, Grid, Typography, Modal} from '@mui/material'\nimport axios from 'axios'\nimport Dropzone from 'react-dropzone';\nimport {ChatState} from '../Context/ChatProvider'\nimport {getSender} from '../Config/ChatLogics'\nconst AddFileModal = () => {\n    const style = {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        width: 400,\n        bgcolor: 'background.paper',\n        border: '2px solid #000',\n        boxShadow: 24,\n        p: 4,\n      };\n    const [open, setOpen] = useState(false);\n    const handleOpen = () => setOpen(true);\n    const handleClose = () => setOpen(false);\n    const {user, selectedChat} = ChatState();\n    const [loading, setLoading] = useState(false);\n    const [file, setFile] = useState(null); // state for storing actual image\n    const [fileType, setFileType] = useState('');\n    const [filesList, setFilesList] = useState([]);\n    const [state, setState] = useState({\n        title: '',\n        description: ''\n    });\n    const [previewSrc, setPreviewSrc] = useState('');\n    const [isPreviewAvailable, setIsPreviewAvailable] = useState(false); // state to show preview only for images\n    const dropRef = useRef();\n    const handleInputChange = (event) => {\n        setState({\n          ...state,\n          [event.target.name]: event.target.value\n        });\n      };\n\n      const onDrop = (files) => {\n        const [uploadedFile] = files;\n        setFile(uploadedFile);\n\n        const fileReader = new FileReader();\n        fileReader.onload = () => {\n          setPreviewSrc(fileReader.result);\n        };\n        fileReader.readAsDataURL(uploadedFile);\n        setIsPreviewAvailable(uploadedFile.name.match(/.(jpeg|jpg|png)$/));\n        dropRef.current.style.border = '2px dashed #e9ebeb';\n      };\n\n      const updateBorder = (dragState) => {\n        if (dragState === 'over') {\n          dropRef.current.style.border = '2px solid #000';\n        } else if (dragState === 'leave') {\n          dropRef.current.style.border = '2px dashed #e9ebeb';\n        }\n      };\n\n      const handleOnSubmit = async (event) => {\n        event.preventDefault();\n\n        try {\n          const { title, description } = state;\n\n          if (title.trim() !== '' && description.trim() !== '') {\n            if (file) {\n              const formData = new FormData();\n              formData.append('file', file);\n              formData.append('title', title);\n              formData.append('description', description);\n              formData.append('fileType', fileType);\n\n\n              await axios.post(\"/api/file/upload\", formData, {\n                headers: {\n                    \"Content-Type\":'multipart/form-data',\n\n                }\n              });\n              console.log(formData);\n\n            } else {\n              console.log('Please select a file to add.');\n            }\n          } else {\n            console.log('Please enter all the field values.');\n          }\n        } catch (error) {\n          console.log(\"ERROR\")\n        }\n      };\n\n\n    return (\n        <div>\n         <Button style={{backgroundColor:\"green\", margin:\"1% 0%\",marginLeft:\"auto\"}}variant=\"contained\" startIcon={<AddIcon/>} onClick={handleOpen}>\n                Add New Material\n            </Button>\n        <Modal\n            open={open}\n            onClose={handleClose}>\n            <Box sx={style}>\n                \n            </Box>\n\n        </Modal>\n            \n        </div>\n    )\n}\n\nexport default AddFileModal\n"]},"metadata":{},"sourceType":"module"}