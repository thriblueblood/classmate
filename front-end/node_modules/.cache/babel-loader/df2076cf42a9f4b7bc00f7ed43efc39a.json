{"ast":null,"code":"var _jsxFileName = \"/Users/thriblueblood/Desktop/SE/Year4_2/THESIS/pure/classmate/front-end/src/ProfilePage/EditProdileModal.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport axios from \"axios\";\nimport EditIcon from '@mui/icons-material/Edit';\nimport { ChatState } from \"../Context/ChatProvider\";\nimport { Button, Box, Typography, Modal, FormControl, Input, TextField } from '@mui/material';\nimport Alert from \"@mui/material/Alert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst token = sessionStorage.getItem('token');\n\nconst EditProfileModal = _ref => {\n  _s();\n\n  let {\n    user,\n    children\n  } = _ref;\n  const style = {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    width: 400,\n    bgcolor: 'background.paper',\n    border: '2px solid #000',\n    boxShadow: 24,\n    p: 4\n  };\n  const {\n    setUser\n  } = ChatState();\n  const [userEmail, setUserEmail] = useState('');\n  const [userName, setUserName] = useState('');\n  const [userPassword, setUserPassword] = useState('');\n  const [userPic, setPic] = useState();\n  const [loading, setLoading] = useState(false);\n  const [open, setOpen] = useState(false);\n\n  const handleOpen = () => setOpen(true);\n\n  const handleClose = () => setOpen(false);\n\n  const onEditProfile = async () => {\n    if (!userName || !userEmail || !userPassword) {\n      return;\n    }\n\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`\n        }\n      };\n      const {\n        data\n      } = await axios.put(`/api/user/edit`, {\n        _id: user._id,\n        name: userName,\n        email: userEmail,\n        password: userPassword,\n        pic: userPic\n      }, config);\n      setUser(data);\n      localStorage.setItem(\"userinfo\", JSON.stringify(data));\n      console.log(data);\n      handleClose();\n    } catch (error) {}\n\n    setUserEmail(\"\");\n    setUserName(\"\");\n    setUserPassword(\"\");\n  };\n\n  const postDetails = async pics => {\n    setLoading(true);\n\n    if (pics === undefined) {\n      /*#__PURE__*/\n      _jsxDEV(Alert, {\n        variant: \"outlined\",\n        severity: \"error\",\n        children: \"This is an error alert \\u2014 check it out!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this);\n\n      return;\n    }\n\n    if (pics.type === \"image/jpeg\" || \"image/png\") {\n      const data = new FormData();\n      data.append(\"file\", pics);\n      data.append(\"upload_preset\", \"Classmate\");\n      data.append(\"cloud_name\", \"dp1xewsqt\");\n      fetch(\"http://api.cloudinary.com/v1_1/dp1xewsqt/image/upload\", {\n        method: \"post\",\n        body: data\n      }).then(res => res.json()).then(data => {\n        setPic(data.url.toString());\n        console.log(data.url.toString());\n        setLoading(false);\n      }).catch(err => {\n        console.log(err);\n        setLoading(false);\n      });\n    } else {\n      /*#__PURE__*/\n      _jsxDEV(Alert, {\n        variant: \"outlined\",\n        severity: \"error\",\n        children: \"This is an error alert \\u2014 check it out!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      onClick: handleOpen,\n      style: {\n        backgroundColor: \"grey\",\n        width: \"100%\"\n      },\n      variant: \"contained\",\n      startIcon: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 115\n      }, this),\n      children: \"Edit Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: open,\n      onClose: handleClose,\n      \"aria-labelledby\": \"modal-modal-title\",\n      \"aria-describedby\": \"modal-modal-description\",\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: style,\n        children: /*#__PURE__*/_jsxDEV(FormControl, {\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            value: userName,\n            variant: \"h1\",\n            fontSize: \"0.5rem\",\n            placeholder: \"new name\",\n            onChange: e => setUserName(e.target.value),\n            children: \"Full Name :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: userEmail,\n            variant: \"h1\",\n            fontSize: \"0.5rem\",\n            placeholder: \"new email\",\n            onChange: e => setUserEmail(e.target.value),\n            children: \"Username :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: userPassword,\n            variant: \"h1\",\n            fontSize: \"0.5rem\",\n            placeholder: \"new password\",\n            onChange: e => setUserPassword(e.target.value),\n            children: \"Username :\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/*\",\n            onChange: e => postDetails(e.target.files[0])\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: onEditProfile,\n            style: {\n              backgroundColor: \"grey\"\n            },\n            variant: \"contained\",\n            children: \"Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 9\n  }, this);\n};\n\n_s(EditProfileModal, \"ZpYB2stXgnOi2/BvhPBNCWGNgkw=\");\n\n_c = EditProfileModal;\nexport default EditProfileModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditProfileModal\");","map":{"version":3,"sources":["/Users/thriblueblood/Desktop/SE/Year4_2/THESIS/pure/classmate/front-end/src/ProfilePage/EditProdileModal.js"],"names":["React","useState","axios","EditIcon","ChatState","Button","Box","Typography","Modal","FormControl","Input","TextField","Alert","token","sessionStorage","getItem","EditProfileModal","user","children","style","position","top","left","transform","width","bgcolor","border","boxShadow","p","setUser","userEmail","setUserEmail","userName","setUserName","userPassword","setUserPassword","userPic","setPic","loading","setLoading","open","setOpen","handleOpen","handleClose","onEditProfile","config","headers","Authorization","data","put","_id","name","email","password","pic","localStorage","setItem","JSON","stringify","console","log","error","postDetails","pics","undefined","type","FormData","append","fetch","method","body","then","res","json","url","toString","catch","err","backgroundColor","e","target","value","files"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\nimport axios from \"axios\"\nimport EditIcon from '@mui/icons-material/Edit';\nimport { ChatState} from \"../Context/ChatProvider\"\nimport {Button, Box, Typography, Modal, FormControl, Input, TextField} from '@mui/material'\nimport Alert from \"@mui/material/Alert\"\n\n\nconst token = sessionStorage.getItem('token');\n\nconst EditProfileModal = ({user,children}) => {\n\n\n    const style = {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n        width: 400,\n        bgcolor: 'background.paper',\n        border: '2px solid #000',\n        boxShadow: 24,\n        p: 4,\n      };\n\n    const { setUser} = ChatState();\n    const [userEmail, setUserEmail] = useState('');\n    const [userName, setUserName] = useState('');\n    const [userPassword, setUserPassword] = useState('');\n    const [userPic, setPic] = useState();\n\n    const [loading,setLoading] = useState(false)\n    const [open, setOpen] = useState(false);\n    const handleOpen = () => setOpen(true);\n    const handleClose = () => setOpen(false);\n\n    \n  \n    const onEditProfile = async () => {\n\n      if (!userName || ! userEmail || !userPassword){\n        return;\n      }\n\n      try {\n        const config = {\n          headers: {\n            Authorization: `Bearer ${user.token}`,\n          },\n        };\n        const { data } = await axios.put(\n          `/api/user/edit`,\n          {\n              _id: user._id,\n              name: userName,\n              email: userEmail,\n              password: userPassword,\n              pic: userPic,\n          },\n          config\n        );\n        setUser(data)\n        localStorage.setItem(\"userinfo\", JSON.stringify(data))\n        console.log(data)\n      \n        handleClose()\n\n      } catch (error) {\n      }\n      setUserEmail(\"\")\n      setUserName(\"\")\n      setUserPassword(\"\")\n    };\n    const postDetails = async (pics) =>{\n      setLoading(true)\n      if(pics === undefined){\n        <Alert variant=\"outlined\" severity=\"error\">\n          This is an error alert — check it out!</Alert>\n          return\n      }\n      if(pics.type === \"image/jpeg\" || \"image/png\"){\n        const data = new FormData()\n        data.append(\"file\", pics)\n        data.append(\"upload_preset\", \"Classmate\")\n        data.append(\"cloud_name\", \"dp1xewsqt\")\n        fetch(\"http://api.cloudinary.com/v1_1/dp1xewsqt/image/upload\", {\n          method:\"post\",\n          body: data,\n        })\n        .then((res) => res.json())\n        .then((data) => {\n          setPic(data.url.toString())\n          console.log(data.url.toString())\n          setLoading(false)\n        })\n        .catch((err) => {\n          console.log(err)\n          setLoading(false)\n        })\n      } else{\n        <Alert variant=\"outlined\" severity=\"error\">\n        This is an error alert — check it out!</Alert>\n      }\n    }\n\n    return (\n        <div>\n        <Button onClick={handleOpen} style={{backgroundColor:\"grey\", width:\"100%\"}}variant=\"contained\" startIcon={<EditIcon/>}>\n                Edit Profile\n        </Button>\n      <Modal\n        open={open}\n        onClose={handleClose}\n        aria-labelledby=\"modal-modal-title\"\n        aria-describedby=\"modal-modal-description\"\n      >\n        <Box sx={style}>\n            <FormControl>\n                <Input value={userName}variant=\"h1\" fontSize=\"0.5rem\" placeholder=\"new name\" onChange={(e) => setUserName(e.target.value)}>Full Name :</Input>\n                <Input value={userEmail}variant=\"h1\" fontSize=\"0.5rem\"placeholder=\"new email\" onChange={(e) => setUserEmail(e.target.value)}>Username :</Input>\n                <Input value={userPassword}variant=\"h1\" fontSize=\"0.5rem\"placeholder=\"new password\" onChange={(e) => setUserPassword(e.target.value)}>Username :</Input>\n                <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={ (e) => \n                        postDetails(e.target.files[0])\n                      }\n                    />\n                <Button onClick={onEditProfile} style={{backgroundColor:\"grey\"}}variant=\"contained\">\n                Update\n            </Button>\n            </FormControl>\n        </Box>\n      </Modal>\n      \n\n    </div>\n    )\n}\n\nexport default EditProfileModal"]},"metadata":{},"sourceType":"module"}